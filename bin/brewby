#!/usr/bin/env ruby
$: << 'lib'
require 'bundler/setup'
require 'brewby'

output = {
  pin: 17,
  pulse_range: 5000
}

Signal.trap(:INT) do
  puts "Shutting down"
  exit
end

adapter = ARGV[0] || :raspberry_pi

application = Brewby::Application.new adapter: adapter.to_sym, inputs: [{}, {}, {}], outputs: [output]
application.add_step :temp_control, mode: :auto, target: 155.0, duration: 15
application.start
